{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _utils = require('../utils');\n\nvar getDataFromHtml = function getDataFromHtml(html, containers) {\n  var fakeDom = document.createElement('html');\n  fakeDom.innerHTML = html;\n  var blocks = [];\n\n  var _loop = function _loop(i) {\n    if (fakeDom.querySelector(containers[i]) == null) {\n      // page in invalid\n      return {\n        v: null\n      };\n    } else {\n      (0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n        (0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\n        blocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n      });\n    }\n  };\n\n  for (var i = 0; i < containers.length; i++) {\n    var _ret = _loop(i);\n\n    if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n  }\n\n  var json = {\n    title: fakeDom.querySelector('title').innerText,\n    pageClass: fakeDom.querySelector('body').className,\n    originalContent: html,\n    blocks: blocks\n  }; // to prevent memory leaks\n\n  fakeDom.innerHTML = '';\n  fakeDom = null;\n  return json;\n};\n\nexports.default = getDataFromHtml;","map":{"version":3,"sources":["/home/wan/Dropbox/Projects/react_proj_chat_app/client/node_modules/swup/lib/helpers/getDataFromHtml.js"],"names":["Object","defineProperty","exports","value","_typeof","Symbol","iterator","obj","constructor","prototype","_utils","require","getDataFromHtml","html","containers","fakeDom","document","createElement","innerHTML","blocks","_loop","i","querySelector","v","queryAll","forEach","item","index","setAttribute","length","push","outerHTML","_ret","json","title","innerText","pageClass","className","originalContent","default"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC5CC,EAAAA,KAAK,EAAE;AADqC,CAA7C;;AAIA,IAAIC,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA3D,GAAsE,UAAUC,GAAV,EAAe;AAAE,SAAO,OAAOA,GAAd;AAAoB,CAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,GAAG,IAAI,OAAOF,MAAP,KAAkB,UAAzB,IAAuCE,GAAG,CAACC,WAAJ,KAAoBH,MAA3D,IAAqEE,GAAG,KAAKF,MAAM,CAACI,SAApF,GAAgG,QAAhG,GAA2G,OAAOF,GAAzH;AAA+H,CAA5Q;;AAEA,IAAIG,MAAM,GAAGC,OAAO,CAAC,UAAD,CAApB;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBC,IAAzB,EAA+BC,UAA/B,EAA2C;AAChE,MAAIC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAd;AACAF,EAAAA,OAAO,CAACG,SAAR,GAAoBL,IAApB;AACA,MAAIM,MAAM,GAAG,EAAb;;AAEA,MAAIC,KAAK,GAAG,SAASA,KAAT,CAAeC,CAAf,EAAkB;AAC7B,QAAIN,OAAO,CAACO,aAAR,CAAsBR,UAAU,CAACO,CAAD,CAAhC,KAAwC,IAA5C,EAAkD;AACjD;AACA,aAAO;AACNE,QAAAA,CAAC,EAAE;AADG,OAAP;AAGA,KALD,MAKO;AACN,OAAC,GAAGb,MAAM,CAACc,QAAX,EAAqBV,UAAU,CAACO,CAAD,CAA/B,EAAoCI,OAApC,CAA4C,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAClE,SAAC,GAAGjB,MAAM,CAACc,QAAX,EAAqBV,UAAU,CAACO,CAAD,CAA/B,EAAoCN,OAApC,EAA6CY,KAA7C,EAAoDC,YAApD,CAAiE,WAAjE,EAA8ET,MAAM,CAACU,MAArF,EADkE,CAC4B;;AAC9FV,QAAAA,MAAM,CAACW,IAAP,CAAY,CAAC,GAAGpB,MAAM,CAACc,QAAX,EAAqBV,UAAU,CAACO,CAAD,CAA/B,EAAoCN,OAApC,EAA6CY,KAA7C,EAAoDI,SAAhE;AACA,OAHD;AAIA;AACD,GAZD;;AAcA,OAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,UAAU,CAACe,MAA/B,EAAuCR,CAAC,EAAxC,EAA4C;AAC3C,QAAIW,IAAI,GAAGZ,KAAK,CAACC,CAAD,CAAhB;;AAEA,QAAI,CAAC,OAAOW,IAAP,KAAgB,WAAhB,GAA8B,WAA9B,GAA4C5B,OAAO,CAAC4B,IAAD,CAApD,MAAgE,QAApE,EAA8E,OAAOA,IAAI,CAACT,CAAZ;AAC9E;;AAED,MAAIU,IAAI,GAAG;AACVC,IAAAA,KAAK,EAAEnB,OAAO,CAACO,aAAR,CAAsB,OAAtB,EAA+Ba,SAD5B;AAEVC,IAAAA,SAAS,EAAErB,OAAO,CAACO,aAAR,CAAsB,MAAtB,EAA8Be,SAF/B;AAGVC,IAAAA,eAAe,EAAEzB,IAHP;AAIVM,IAAAA,MAAM,EAAEA;AAJE,GAAX,CAzBgE,CAgChE;;AACAJ,EAAAA,OAAO,CAACG,SAAR,GAAoB,EAApB;AACAH,EAAAA,OAAO,GAAG,IAAV;AAEA,SAAOkB,IAAP;AACA,CArCD;;AAuCA/B,OAAO,CAACqC,OAAR,GAAkB3B,eAAlB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _utils = require('../utils');\n\nvar getDataFromHtml = function getDataFromHtml(html, containers) {\n\tvar fakeDom = document.createElement('html');\n\tfakeDom.innerHTML = html;\n\tvar blocks = [];\n\n\tvar _loop = function _loop(i) {\n\t\tif (fakeDom.querySelector(containers[i]) == null) {\n\t\t\t// page in invalid\n\t\t\treturn {\n\t\t\t\tv: null\n\t\t\t};\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\t\t\t\tblocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\tvar _ret = _loop(i);\n\n\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t}\n\n\tvar json = {\n\t\ttitle: fakeDom.querySelector('title').innerText,\n\t\tpageClass: fakeDom.querySelector('body').className,\n\t\toriginalContent: html,\n\t\tblocks: blocks\n\t};\n\n\t// to prevent memory leaks\n\tfakeDom.innerHTML = '';\n\tfakeDom = null;\n\n\treturn json;\n};\n\nexports.default = getDataFromHtml;"]},"metadata":{},"sourceType":"script"}