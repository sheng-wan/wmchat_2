{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('../utils');\n\nvar _helpers = require('../helpers');\n\nvar renderPage = function renderPage(page, popstate) {\n  var _this = this;\n\n  document.documentElement.classList.remove('is-leaving'); // replace state in case the url was redirected\n\n  var link = new _helpers.Link(page.responseURL);\n\n  if (window.location.pathname !== link.getPath()) {\n    window.history.replaceState({\n      url: link.getPath(),\n      random: Math.random(),\n      source: 'swup'\n    }, document.title, link.getPath()); // save new record for redirected url\n\n    this.cache.cacheUrl(_extends({}, page, {\n      url: link.getPath()\n    }));\n  } // only add for non-popstate transitions\n\n\n  if (!popstate || this.options.animateHistoryBrowsing) {\n    document.documentElement.classList.add('is-rendering');\n  }\n\n  this.triggerEvent('willReplaceContent', popstate); // replace blocks\n\n  for (var i = 0; i < page.blocks.length; i++) {\n    document.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n  } // set title\n\n\n  document.title = page.title;\n  this.triggerEvent('contentReplaced', popstate);\n  this.triggerEvent('pageView', popstate); // empty cache if it's disabled (because pages could be preloaded and stuff)\n\n  if (!this.options.cache) {\n    this.cache.empty();\n  } // start animation IN\n\n\n  setTimeout(function () {\n    if (!popstate || _this.options.animateHistoryBrowsing) {\n      _this.triggerEvent('animationInStart');\n\n      document.documentElement.classList.remove('is-animating');\n    }\n  }, 10); // handle end of animation\n\n  var animationPromises = this.getAnimationPromises('in');\n\n  if (!popstate || this.options.animateHistoryBrowsing) {\n    Promise.all(animationPromises).then(function () {\n      _this.triggerEvent('animationInDone');\n\n      _this.triggerEvent('transitionEnd', popstate); // remove \"to-{page}\" classes\n\n\n      document.documentElement.className.split(' ').forEach(function (classItem) {\n        if (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n          document.documentElement.classList.remove(classItem);\n        }\n      });\n    });\n  } else {\n    this.triggerEvent('transitionEnd', popstate);\n  } // reset scroll-to element\n\n\n  this.scrollToElement = null;\n};\n\nexports.default = renderPage;","map":{"version":3,"sources":["/home/wan/Dropbox/Projects/react_proj_chat_app/client/node_modules/swup/lib/modules/renderPage.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_utils","require","_helpers","renderPage","page","popstate","_this","document","documentElement","classList","remove","link","Link","responseURL","window","location","pathname","getPath","history","replaceState","url","random","Math","title","cache","cacheUrl","options","animateHistoryBrowsing","add","triggerEvent","blocks","body","querySelector","outerHTML","empty","setTimeout","animationPromises","getAnimationPromises","Promise","all","then","className","split","forEach","classItem","RegExp","test","scrollToElement","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = require('../utils');\n\nvar _helpers = require('../helpers');\n\nvar renderPage = function renderPage(page, popstate) {\n\tvar _this = this;\n\n\tdocument.documentElement.classList.remove('is-leaving');\n\n\t// replace state in case the url was redirected\n\tvar link = new _helpers.Link(page.responseURL);\n\tif (window.location.pathname !== link.getPath()) {\n\t\twindow.history.replaceState({\n\t\t\turl: link.getPath(),\n\t\t\trandom: Math.random(),\n\t\t\tsource: 'swup'\n\t\t}, document.title, link.getPath());\n\n\t\t// save new record for redirected url\n\t\tthis.cache.cacheUrl(_extends({}, page, { url: link.getPath() }));\n\t}\n\n\t// only add for non-popstate transitions\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tdocument.documentElement.classList.add('is-rendering');\n\t}\n\n\tthis.triggerEvent('willReplaceContent', popstate);\n\n\t// replace blocks\n\tfor (var i = 0; i < page.blocks.length; i++) {\n\t\tdocument.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n\t}\n\n\t// set title\n\tdocument.title = page.title;\n\n\tthis.triggerEvent('contentReplaced', popstate);\n\tthis.triggerEvent('pageView', popstate);\n\n\t// empty cache if it's disabled (because pages could be preloaded and stuff)\n\tif (!this.options.cache) {\n\t\tthis.cache.empty();\n\t}\n\n\t// start animation IN\n\tsetTimeout(function () {\n\t\tif (!popstate || _this.options.animateHistoryBrowsing) {\n\t\t\t_this.triggerEvent('animationInStart');\n\t\t\tdocument.documentElement.classList.remove('is-animating');\n\t\t}\n\t}, 10);\n\n\t// handle end of animation\n\tvar animationPromises = this.getAnimationPromises('in');\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationInDone');\n\t\t\t_this.triggerEvent('transitionEnd', popstate);\n\t\t\t// remove \"to-{page}\" classes\n\t\t\tdocument.documentElement.className.split(' ').forEach(function (classItem) {\n\t\t\t\tif (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n\t\t\t\t\tdocument.documentElement.classList.remove(classItem);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tthis.triggerEvent('transitionEnd', popstate);\n\t}\n\n\t// reset scroll-to element\n\tthis.scrollToElement = null;\n};\n\nexports.default = renderPage;"]},"metadata":{},"sourceType":"script"}