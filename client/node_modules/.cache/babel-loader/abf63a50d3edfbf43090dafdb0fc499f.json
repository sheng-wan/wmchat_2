{"ast":null,"code":"(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else if (typeof exports === 'object') exports[\"Swup\"] = factory();else root[\"Swup\"] = factory();\n})(window, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n          return value[key];\n        }.bind(null, key));\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 2);\n      /******/\n    }(\n    /************************************************************************/\n\n    /******/\n    [\n    /* 0 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Link = exports.markSwupElements = exports.getCurrentUrl = exports.transitionEnd = exports.fetch = exports.getDataFromHtml = exports.createHistoryRecord = exports.classify = undefined;\n\n      var _classify = __webpack_require__(8);\n\n      var _classify2 = _interopRequireDefault(_classify);\n\n      var _createHistoryRecord = __webpack_require__(9);\n\n      var _createHistoryRecord2 = _interopRequireDefault(_createHistoryRecord);\n\n      var _getDataFromHtml = __webpack_require__(10);\n\n      var _getDataFromHtml2 = _interopRequireDefault(_getDataFromHtml);\n\n      var _fetch = __webpack_require__(11);\n\n      var _fetch2 = _interopRequireDefault(_fetch);\n\n      var _transitionEnd = __webpack_require__(12);\n\n      var _transitionEnd2 = _interopRequireDefault(_transitionEnd);\n\n      var _getCurrentUrl = __webpack_require__(13);\n\n      var _getCurrentUrl2 = _interopRequireDefault(_getCurrentUrl);\n\n      var _markSwupElements = __webpack_require__(14);\n\n      var _markSwupElements2 = _interopRequireDefault(_markSwupElements);\n\n      var _Link = __webpack_require__(15);\n\n      var _Link2 = _interopRequireDefault(_Link);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          default: obj\n        };\n      }\n\n      var classify = exports.classify = _classify2.default;\n      var createHistoryRecord = exports.createHistoryRecord = _createHistoryRecord2.default;\n      var getDataFromHtml = exports.getDataFromHtml = _getDataFromHtml2.default;\n      var fetch = exports.fetch = _fetch2.default;\n      var transitionEnd = exports.transitionEnd = _transitionEnd2.default;\n      var getCurrentUrl = exports.getCurrentUrl = _getCurrentUrl2.default;\n      var markSwupElements = exports.markSwupElements = _markSwupElements2.default;\n      var Link = exports.Link = _Link2.default;\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var query = exports.query = function query(selector) {\n        var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n        if (typeof selector !== 'string') {\n          return selector;\n        }\n\n        return context.querySelector(selector);\n      };\n\n      var queryAll = exports.queryAll = function queryAll(selector) {\n        var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n        if (typeof selector !== 'string') {\n          return selector;\n        }\n\n        return Array.prototype.slice.call(context.querySelectorAll(selector));\n      };\n      /***/\n\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var _index = __webpack_require__(3);\n\n      var _index2 = _interopRequireDefault(_index);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          default: obj\n        };\n      }\n\n      module.exports = _index2.default; // this is here for webpack to expose Swup as window.Swup\n\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }(); // modules\n\n\n      var _delegate = __webpack_require__(4);\n\n      var _delegate2 = _interopRequireDefault(_delegate);\n\n      var _Cache = __webpack_require__(6);\n\n      var _Cache2 = _interopRequireDefault(_Cache);\n\n      var _loadPage = __webpack_require__(7);\n\n      var _loadPage2 = _interopRequireDefault(_loadPage);\n\n      var _renderPage = __webpack_require__(16);\n\n      var _renderPage2 = _interopRequireDefault(_renderPage);\n\n      var _triggerEvent = __webpack_require__(17);\n\n      var _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\n      var _on = __webpack_require__(18);\n\n      var _on2 = _interopRequireDefault(_on);\n\n      var _off = __webpack_require__(19);\n\n      var _off2 = _interopRequireDefault(_off);\n\n      var _updateTransition = __webpack_require__(20);\n\n      var _updateTransition2 = _interopRequireDefault(_updateTransition);\n\n      var _getAnimationPromises = __webpack_require__(21);\n\n      var _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\n      var _getPageData = __webpack_require__(22);\n\n      var _getPageData2 = _interopRequireDefault(_getPageData);\n\n      var _plugins = __webpack_require__(23);\n\n      var _utils = __webpack_require__(1);\n\n      var _helpers = __webpack_require__(0);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          default: obj\n        };\n      }\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var Swup = function () {\n        function Swup(setOptions) {\n          _classCallCheck(this, Swup); // default options\n\n\n          var defaults = {\n            animateHistoryBrowsing: false,\n            animationSelector: '[class*=\"transition-\"]',\n            linkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n            cache: true,\n            containers: ['#swup'],\n            requestHeaders: {\n              'X-Requested-With': 'swup',\n              Accept: 'text/html, application/xhtml+xml'\n            },\n            plugins: [],\n            skipPopStateHandling: function skipPopStateHandling(event) {\n              return !(event.state && event.state.source === 'swup');\n            }\n          }; // merge options\n\n          var options = _extends({}, defaults, setOptions); // handler arrays\n\n\n          this._handlers = {\n            animationInDone: [],\n            animationInStart: [],\n            animationOutDone: [],\n            animationOutStart: [],\n            animationSkipped: [],\n            clickLink: [],\n            contentReplaced: [],\n            disabled: [],\n            enabled: [],\n            openPageInNewTab: [],\n            pageLoaded: [],\n            pageRetrievedFromCache: [],\n            pageView: [],\n            popState: [],\n            samePage: [],\n            samePageWithHash: [],\n            serverError: [],\n            transitionStart: [],\n            transitionEnd: [],\n            willReplaceContent: []\n          }; // variable for id of element to scroll to after render\n\n          this.scrollToElement = null; // variable for promise used for preload, so no new loading of the same page starts while page is loading\n\n          this.preloadPromise = null; // variable for save options\n\n          this.options = options; // variable for plugins array\n\n          this.plugins = []; // variable for current transition object\n\n          this.transition = {}; // variable for keeping event listeners from \"delegate\"\n\n          this.delegatedListeners = {}; // make modules accessible in instance\n\n          this.cache = new _Cache2.default();\n          this.cache.swup = this;\n          this.loadPage = _loadPage2.default;\n          this.renderPage = _renderPage2.default;\n          this.triggerEvent = _triggerEvent2.default;\n          this.on = _on2.default;\n          this.off = _off2.default;\n          this.updateTransition = _updateTransition2.default;\n          this.getAnimationPromises = _getAnimationPromises2.default;\n          this.getPageData = _getPageData2.default;\n\n          this.log = function () {}; // here so it can be used by plugins\n\n\n          this.use = _plugins.use;\n          this.unuse = _plugins.unuse;\n          this.findPlugin = _plugins.findPlugin; // enable swup\n\n          this.enable();\n        }\n\n        _createClass(Swup, [{\n          key: 'enable',\n          value: function enable() {\n            var _this = this; // check for Promise support\n\n\n            if (typeof Promise === 'undefined') {\n              console.warn('Promise is not supported');\n              return;\n            } // add event listeners\n\n\n            this.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n            window.addEventListener('popstate', this.popStateHandler.bind(this)); // initial save to cache\n\n            var page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n            page.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\n            if (this.options.cache) {\n              this.cache.cacheUrl(page);\n            } // mark swup blocks in html\n\n\n            (0, _helpers.markSwupElements)(document.documentElement, this.options.containers); // mount plugins\n\n            this.options.plugins.forEach(function (plugin) {\n              _this.use(plugin);\n            }); // modify initial history record\n\n            window.history.replaceState(Object.assign({}, window.history.state, {\n              url: window.location.href,\n              random: Math.random(),\n              source: 'swup'\n            }), document.title, window.location.href); // trigger enabled event\n\n            this.triggerEvent('enabled'); // add swup-enabled class to html tag\n\n            document.documentElement.classList.add('swup-enabled'); // trigger page view event\n\n            this.triggerEvent('pageView');\n          }\n        }, {\n          key: 'destroy',\n          value: function destroy() {\n            var _this2 = this; // remove delegated listeners\n\n\n            this.delegatedListeners.click.destroy();\n            this.delegatedListeners.mouseover.destroy(); // remove popstate listener\n\n            window.removeEventListener('popstate', this.popStateHandler.bind(this)); // empty cache\n\n            this.cache.empty(); // unmount plugins\n\n            this.options.plugins.forEach(function (plugin) {\n              _this2.unuse(plugin);\n            }); // remove swup data atributes from blocks\n\n            (0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n              element.removeAttribute('data-swup');\n            }); // remove handlers\n\n            this.off(); // trigger disable event\n\n            this.triggerEvent('disabled'); // remove swup-enabled class from html tag\n\n            document.documentElement.classList.remove('swup-enabled');\n          }\n        }, {\n          key: 'linkClickHandler',\n          value: function linkClickHandler(event) {\n            // no control key pressed\n            if (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n              // index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n              if (event.button === 0) {\n                this.triggerEvent('clickLink', event);\n                event.preventDefault();\n                var link = new _helpers.Link(event.delegateTarget);\n\n                if (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n                  // link to the same URL\n                  if (link.getHash() != '') {\n                    // link to the same URL with hash\n                    this.triggerEvent('samePageWithHash', event);\n                    var element = document.querySelector(link.getHash());\n\n                    if (element != null) {\n                      history.replaceState({\n                        url: link.getAddress() + link.getHash(),\n                        random: Math.random(),\n                        source: 'swup'\n                      }, document.title, link.getAddress() + link.getHash());\n                    } else {\n                      // referenced element not found\n                      console.warn('Element for offset not found (' + link.getHash() + ')');\n                    }\n                  } else {\n                    // link to the same URL without hash\n                    this.triggerEvent('samePage', event);\n                  }\n                } else {\n                  // link to different url\n                  if (link.getHash() != '') {\n                    this.scrollToElement = link.getHash();\n                  } // get custom transition from data\n\n\n                  var customTransition = event.delegateTarget.getAttribute('data-swup-transition'); // load page\n\n                  this.loadPage({\n                    url: link.getAddress(),\n                    customTransition: customTransition\n                  }, false);\n                }\n              }\n            } else {\n              // open in new tab (do nothing)\n              this.triggerEvent('openPageInNewTab', event);\n            }\n          }\n        }, {\n          key: 'popStateHandler',\n          value: function popStateHandler(event) {\n            if (this.options.skipPopStateHandling(event)) return;\n            var link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\n            if (link.getHash() !== '') {\n              this.scrollToElement = link.getHash();\n            } else {\n              event.preventDefault();\n            }\n\n            this.triggerEvent('popState', event);\n            this.loadPage({\n              url: link.getAddress()\n            }, event);\n          }\n        }]);\n\n        return Swup;\n      }();\n\n      exports.default = Swup;\n      /***/\n    },\n    /* 4 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      var closest = __webpack_require__(5);\n      /**\n       * Delegates event to a selector.\n       *\n       * @param {Element} element\n       * @param {String} selector\n       * @param {String} type\n       * @param {Function} callback\n       * @param {Boolean} useCapture\n       * @return {Object}\n       */\n\n\n      function delegate(element, selector, type, callback, useCapture) {\n        var listenerFn = listener.apply(this, arguments);\n        element.addEventListener(type, listenerFn, useCapture);\n        return {\n          destroy: function () {\n            element.removeEventListener(type, listenerFn, useCapture);\n          }\n        };\n      }\n      /**\n       * Finds closest match and invokes callback.\n       *\n       * @param {Element} element\n       * @param {String} selector\n       * @param {String} type\n       * @param {Function} callback\n       * @return {Function}\n       */\n\n\n      function listener(element, selector, type, callback) {\n        return function (e) {\n          e.delegateTarget = closest(e.target, selector);\n\n          if (e.delegateTarget) {\n            callback.call(element, e);\n          }\n        };\n      }\n\n      module.exports = delegate;\n      /***/\n    },\n    /* 5 */\n\n    /***/\n    function (module, exports) {\n      var DOCUMENT_NODE_TYPE = 9;\n      /**\n       * A polyfill for Element.matches()\n       */\n\n      if (typeof Element !== 'undefined' && !Element.prototype.matches) {\n        var proto = Element.prototype;\n        proto.matches = proto.matchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector || proto.oMatchesSelector || proto.webkitMatchesSelector;\n      }\n      /**\n       * Finds the closest parent that matches a selector.\n       *\n       * @param {Element} element\n       * @param {String} selector\n       * @return {Function}\n       */\n\n\n      function closest(element, selector) {\n        while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n          if (typeof element.matches === 'function' && element.matches(selector)) {\n            return element;\n          }\n\n          element = element.parentNode;\n        }\n      }\n\n      module.exports = closest;\n      /***/\n    },\n    /* 6 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var Cache = exports.Cache = function () {\n        function Cache() {\n          _classCallCheck(this, Cache);\n\n          this.pages = {};\n          this.last = null;\n        }\n\n        _createClass(Cache, [{\n          key: 'cacheUrl',\n          value: function cacheUrl(page) {\n            if (page.url in this.pages === false) {\n              this.pages[page.url] = page;\n            }\n\n            this.last = this.pages[page.url];\n            this.swup.log('Cache (' + Object.keys(this.pages).length + ')', this.pages);\n          }\n        }, {\n          key: 'getPage',\n          value: function getPage(url) {\n            return this.pages[url];\n          }\n        }, {\n          key: 'getCurrentPage',\n          value: function getCurrentPage() {\n            return this.getPage(window.location.pathname + window.location.search);\n          }\n        }, {\n          key: 'exists',\n          value: function exists(url) {\n            return url in this.pages;\n          }\n        }, {\n          key: 'empty',\n          value: function empty() {\n            this.pages = {};\n            this.last = null;\n            this.swup.log('Cache cleared');\n          }\n        }, {\n          key: 'remove',\n          value: function remove(url) {\n            delete this.pages[url];\n          }\n        }]);\n\n        return Cache;\n      }();\n\n      exports.default = Cache;\n      /***/\n    },\n    /* 7 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      var _helpers = __webpack_require__(0);\n\n      var loadPage = function loadPage(data, popstate) {\n        var _this = this; // create array for storing animation promises\n\n\n        var animationPromises = [],\n            xhrPromise = void 0;\n\n        var animateOut = function animateOut() {\n          _this.triggerEvent('animationOutStart'); // handle classes\n\n\n          document.documentElement.classList.add('is-changing');\n          document.documentElement.classList.add('is-leaving');\n          document.documentElement.classList.add('is-animating');\n\n          if (popstate) {\n            document.documentElement.classList.add('is-popstate');\n          }\n\n          document.documentElement.classList.add('to-' + (0, _helpers.classify)(data.url)); // animation promise stuff\n\n          animationPromises = _this.getAnimationPromises('out');\n          Promise.all(animationPromises).then(function () {\n            _this.triggerEvent('animationOutDone');\n          }); // create history record if this is not a popstate call\n\n          if (!popstate) {\n            // create pop element with or without anchor\n            var state = void 0;\n\n            if (_this.scrollToElement != null) {\n              state = data.url + _this.scrollToElement;\n            } else {\n              state = data.url;\n            }\n\n            (0, _helpers.createHistoryRecord)(state);\n          }\n        };\n\n        this.triggerEvent('transitionStart', popstate); // set transition object\n\n        if (data.customTransition != null) {\n          this.updateTransition(window.location.pathname, data.url, data.customTransition);\n          document.documentElement.classList.add('to-' + (0, _helpers.classify)(data.customTransition));\n        } else {\n          this.updateTransition(window.location.pathname, data.url);\n        } // start/skip animation\n\n\n        if (!popstate || this.options.animateHistoryBrowsing) {\n          animateOut();\n        } else {\n          this.triggerEvent('animationSkipped');\n        } // start/skip loading of page\n\n\n        if (this.cache.exists(data.url)) {\n          xhrPromise = new Promise(function (resolve) {\n            resolve();\n          });\n          this.triggerEvent('pageRetrievedFromCache');\n        } else {\n          if (!this.preloadPromise || this.preloadPromise.route != data.url) {\n            xhrPromise = new Promise(function (resolve, reject) {\n              (0, _helpers.fetch)(_extends({}, data, {\n                headers: _this.options.requestHeaders\n              }), function (response) {\n                if (response.status === 500) {\n                  _this.triggerEvent('serverError');\n\n                  reject(data.url);\n                  return;\n                } else {\n                  // get json data\n                  var page = _this.getPageData(response);\n\n                  if (page != null) {\n                    page.url = data.url;\n                  } else {\n                    reject(data.url);\n                    return;\n                  } // render page\n\n\n                  _this.cache.cacheUrl(page);\n\n                  _this.triggerEvent('pageLoaded');\n                }\n\n                resolve();\n              });\n            });\n          } else {\n            xhrPromise = this.preloadPromise;\n          }\n        } // when everything is ready, handle the outcome\n\n\n        Promise.all(animationPromises.concat([xhrPromise])).then(function () {\n          // render page\n          _this.renderPage(_this.cache.getPage(data.url), popstate);\n\n          _this.preloadPromise = null;\n        }).catch(function (errorUrl) {\n          // rewrite the skipPopStateHandling function to redirect manually when the history.go is processed\n          _this.options.skipPopStateHandling = function () {\n            window.location = errorUrl;\n            return true;\n          }; // go back to the actual page were still at\n\n\n          window.history.go(-1);\n        });\n      };\n\n      exports.default = loadPage;\n      /***/\n    },\n    /* 8 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var classify = function classify(text) {\n        var output = text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n        .replace(/\\//g, '-') // Replace / with -\n        .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n        .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n        .replace(/^-+/, '') // Trim - from start of text\n        .replace(/-+$/, ''); // Trim - from end of text\n\n        if (output[0] === '/') output = output.splice(1);\n        if (output === '') output = 'homepage';\n        return output;\n      };\n\n      exports.default = classify;\n      /***/\n    },\n    /* 9 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var createHistoryRecord = function createHistoryRecord(url) {\n        window.history.pushState({\n          url: url || window.location.href.split(window.location.hostname)[1],\n          random: Math.random(),\n          source: 'swup'\n        }, document.getElementsByTagName('title')[0].innerText, url || window.location.href.split(window.location.hostname)[1]);\n      };\n\n      exports.default = createHistoryRecord;\n      /***/\n    },\n    /* 10 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var _utils = __webpack_require__(1);\n\n      var getDataFromHtml = function getDataFromHtml(html, containers) {\n        var fakeDom = document.createElement('html');\n        fakeDom.innerHTML = html;\n        var blocks = [];\n\n        var _loop = function _loop(i) {\n          if (fakeDom.querySelector(containers[i]) == null) {\n            // page in invalid\n            return {\n              v: null\n            };\n          } else {\n            (0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n              (0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\n              blocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n            });\n          }\n        };\n\n        for (var i = 0; i < containers.length; i++) {\n          var _ret = _loop(i);\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n\n        var json = {\n          title: fakeDom.querySelector('title').innerText,\n          pageClass: fakeDom.querySelector('body').className,\n          originalContent: html,\n          blocks: blocks\n        }; // to prevent memory leaks\n\n        fakeDom.innerHTML = '';\n        fakeDom = null;\n        return json;\n      };\n\n      exports.default = getDataFromHtml;\n      /***/\n    },\n    /* 11 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      var fetch = function fetch(setOptions) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var defaults = {\n          url: window.location.pathname + window.location.search,\n          method: 'GET',\n          data: null,\n          headers: {}\n        };\n\n        var options = _extends({}, defaults, setOptions);\n\n        var request = new XMLHttpRequest();\n\n        request.onreadystatechange = function () {\n          if (request.readyState === 4) {\n            if (request.status !== 500) {\n              callback(request);\n            } else {\n              callback(request);\n            }\n          }\n        };\n\n        request.open(options.method, options.url, true);\n        Object.keys(options.headers).forEach(function (key) {\n          request.setRequestHeader(key, options.headers[key]);\n        });\n        request.send(options.data);\n        return request;\n      };\n\n      exports.default = fetch;\n      /***/\n    },\n    /* 12 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var transitionEnd = function transitionEnd() {\n        var el = document.createElement('div');\n        var transEndEventNames = {\n          WebkitTransition: 'webkitTransitionEnd',\n          MozTransition: 'transitionend',\n          OTransition: 'oTransitionEnd otransitionend',\n          transition: 'transitionend'\n        };\n\n        for (var name in transEndEventNames) {\n          if (el.style[name] !== undefined) {\n            return transEndEventNames[name];\n          }\n        }\n\n        return false;\n      };\n\n      exports.default = transitionEnd;\n      /***/\n    },\n    /* 13 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var getCurrentUrl = function getCurrentUrl() {\n        return window.location.pathname + window.location.search;\n      };\n\n      exports.default = getCurrentUrl;\n      /***/\n    },\n    /* 14 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _utils = __webpack_require__(1);\n\n      var markSwupElements = function markSwupElements(element, containers) {\n        var blocks = 0;\n\n        var _loop = function _loop(i) {\n          if (element.querySelector(containers[i]) == null) {\n            console.warn('Element ' + containers[i] + ' is not in current page.');\n          } else {\n            (0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n              (0, _utils.queryAll)(containers[i], element)[index].setAttribute('data-swup', blocks);\n              blocks++;\n            });\n          }\n        };\n\n        for (var i = 0; i < containers.length; i++) {\n          _loop(i);\n        }\n      };\n\n      exports.default = markSwupElements;\n      /***/\n    },\n    /* 15 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _createClass = function () {\n        function defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) defineProperties(Constructor, staticProps);\n          return Constructor;\n        };\n      }();\n\n      function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n          throw new TypeError(\"Cannot call a class as a function\");\n        }\n      }\n\n      var Link = function () {\n        function Link(elementOrUrl) {\n          _classCallCheck(this, Link);\n\n          if (elementOrUrl instanceof Element || elementOrUrl instanceof SVGElement) {\n            this.link = elementOrUrl;\n          } else {\n            this.link = document.createElement('a');\n            this.link.href = elementOrUrl;\n          }\n        }\n\n        _createClass(Link, [{\n          key: 'getPath',\n          value: function getPath() {\n            var path = this.link.pathname;\n\n            if (path[0] !== '/') {\n              path = '/' + path;\n            }\n\n            return path;\n          }\n        }, {\n          key: 'getAddress',\n          value: function getAddress() {\n            var path = this.link.pathname + this.link.search;\n\n            if (this.link.getAttribute('xlink:href')) {\n              path = this.link.getAttribute('xlink:href');\n            }\n\n            if (path[0] !== '/') {\n              path = '/' + path;\n            }\n\n            return path;\n          }\n        }, {\n          key: 'getHash',\n          value: function getHash() {\n            return this.link.hash;\n          }\n        }]);\n\n        return Link;\n      }();\n\n      exports.default = Link;\n      /***/\n    },\n    /* 16 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n      var _utils = __webpack_require__(1);\n\n      var _helpers = __webpack_require__(0);\n\n      var renderPage = function renderPage(page, popstate) {\n        var _this = this;\n\n        document.documentElement.classList.remove('is-leaving'); // replace state in case the url was redirected\n\n        var link = new _helpers.Link(page.responseURL);\n\n        if (window.location.pathname !== link.getPath()) {\n          window.history.replaceState({\n            url: link.getPath(),\n            random: Math.random(),\n            source: 'swup'\n          }, document.title, link.getPath()); // save new record for redirected url\n\n          this.cache.cacheUrl(_extends({}, page, {\n            url: link.getPath()\n          }));\n        } // only add for non-popstate transitions\n\n\n        if (!popstate || this.options.animateHistoryBrowsing) {\n          document.documentElement.classList.add('is-rendering');\n        }\n\n        this.triggerEvent('willReplaceContent', popstate); // replace blocks\n\n        for (var i = 0; i < page.blocks.length; i++) {\n          document.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n        } // set title\n\n\n        document.title = page.title;\n        this.triggerEvent('contentReplaced', popstate);\n        this.triggerEvent('pageView', popstate); // empty cache if it's disabled (because pages could be preloaded and stuff)\n\n        if (!this.options.cache) {\n          this.cache.empty();\n        } // start animation IN\n\n\n        setTimeout(function () {\n          if (!popstate || _this.options.animateHistoryBrowsing) {\n            _this.triggerEvent('animationInStart');\n\n            document.documentElement.classList.remove('is-animating');\n          }\n        }, 10); // handle end of animation\n\n        var animationPromises = this.getAnimationPromises('in');\n\n        if (!popstate || this.options.animateHistoryBrowsing) {\n          Promise.all(animationPromises).then(function () {\n            _this.triggerEvent('animationInDone');\n\n            _this.triggerEvent('transitionEnd', popstate); // remove \"to-{page}\" classes\n\n\n            document.documentElement.className.split(' ').forEach(function (classItem) {\n              if (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n                document.documentElement.classList.remove(classItem);\n              }\n            });\n          });\n        } else {\n          this.triggerEvent('transitionEnd', popstate);\n        } // reset scroll-to element\n\n\n        this.scrollToElement = null;\n      };\n\n      exports.default = renderPage;\n      /***/\n    },\n    /* 17 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var triggerEvent = function triggerEvent(eventName, originalEvent) {\n        // call saved handlers with \"on\" method and pass originalEvent object if available\n        this._handlers[eventName].forEach(function (handler) {\n          try {\n            handler(originalEvent);\n          } catch (error) {\n            console.error(error);\n          }\n        }); // trigger event on document with prefix \"swup:\"\n\n\n        var event = new CustomEvent('swup:' + eventName, {\n          detail: eventName\n        });\n        document.dispatchEvent(event);\n      };\n\n      exports.default = triggerEvent;\n      /***/\n    },\n    /* 18 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var on = function on(event, handler) {\n        if (this._handlers[event]) {\n          this._handlers[event].push(handler);\n        } else {\n          console.warn(\"Unsupported event \" + event + \".\");\n        }\n      };\n\n      exports.default = on;\n      /***/\n    },\n    /* 19 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var off = function off(event, handler) {\n        var _this = this;\n\n        if (event != null) {\n          if (handler != null) {\n            if (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n              return savedHandler === handler;\n            }).length) {\n              var toRemove = this._handlers[event].filter(function (savedHandler) {\n                return savedHandler === handler;\n              })[0];\n\n              var index = this._handlers[event].indexOf(toRemove);\n\n              if (index > -1) {\n                this._handlers[event].splice(index, 1);\n              }\n            } else {\n              console.warn(\"Handler for event '\" + event + \"' no found.\");\n            }\n          } else {\n            this._handlers[event] = [];\n          }\n        } else {\n          Object.keys(this._handlers).forEach(function (keys) {\n            _this._handlers[keys] = [];\n          });\n        }\n      };\n\n      exports.default = off;\n      /***/\n    },\n    /* 20 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var updateTransition = function updateTransition(from, to, custom) {\n        // transition routes\n        this.transition = {\n          from: from,\n          to: to,\n          custom: custom\n        };\n      };\n\n      exports.default = updateTransition;\n      /***/\n    },\n    /* 21 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _utils = __webpack_require__(1);\n\n      var _helpers = __webpack_require__(0);\n\n      var getAnimationPromises = function getAnimationPromises() {\n        var promises = [];\n        var animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n        animatedElements.forEach(function (element) {\n          var promise = new Promise(function (resolve) {\n            element.addEventListener((0, _helpers.transitionEnd)(), function (event) {\n              if (element == event.target) {\n                resolve();\n              }\n            });\n          });\n          promises.push(promise);\n        });\n        return promises;\n      };\n\n      exports.default = getAnimationPromises;\n      /***/\n    },\n    /* 22 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var _helpers = __webpack_require__(0);\n\n      var getPageData = function getPageData(request) {\n        // this method can be replaced in case other content than html is expected to be received from server\n        // this function should always return {title, pageClass, originalContent, blocks, responseURL}\n        // in case page has invalid structure - return null\n        var html = request.responseText;\n        var pageObject = (0, _helpers.getDataFromHtml)(html, this.options.containers);\n\n        if (pageObject) {\n          pageObject.responseURL = request.responseURL ? request.responseURL : window.location.href;\n        } else {\n          console.warn('Received page is invalid.');\n          return null;\n        }\n\n        return pageObject;\n      };\n\n      exports.default = getPageData;\n      /***/\n    },\n    /* 23 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var use = exports.use = function use(plugin) {\n        if (!plugin.isSwupPlugin) {\n          console.warn('Not swup plugin instance ' + plugin + '.');\n          return;\n        }\n\n        this.plugins.push(plugin);\n        plugin.swup = this;\n\n        if (typeof plugin._beforeMount === 'function') {\n          plugin._beforeMount();\n        }\n\n        plugin.mount();\n        return this.plugins;\n      };\n\n      var unuse = exports.unuse = function unuse(plugin) {\n        var pluginReference = void 0;\n\n        if (typeof plugin === 'string') {\n          pluginReference = this.plugins.find(function (p) {\n            return plugin === p.name;\n          });\n        } else {\n          pluginReference = plugin;\n        }\n\n        if (!pluginReference) {\n          console.warn('No such plugin.');\n          return;\n        }\n\n        pluginReference.unmount();\n\n        if (typeof pluginReference._afterUnmount === 'function') {\n          pluginReference._afterUnmount();\n        }\n\n        var index = this.plugins.indexOf(pluginReference);\n        this.plugins.splice(index, 1);\n        return this.plugins;\n      };\n\n      var findPlugin = exports.findPlugin = function findPlugin(pluginName) {\n        return this.plugins.find(function (p) {\n          return pluginName === p.name;\n        });\n      };\n      /***/\n\n    }\n    /******/\n    ])\n  );\n});","map":{"version":3,"sources":["/home/wan/Dropbox/Projects/react_proj_chat_app/client/node_modules/swup/dist/swup.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","Link","markSwupElements","getCurrentUrl","transitionEnd","fetch","getDataFromHtml","createHistoryRecord","classify","undefined","_classify","_classify2","_interopRequireDefault","_createHistoryRecord","_createHistoryRecord2","_getDataFromHtml","_getDataFromHtml2","_fetch","_fetch2","_transitionEnd","_transitionEnd2","_getCurrentUrl","_getCurrentUrl2","_markSwupElements","_markSwupElements2","_Link","_Link2","obj","default","query","selector","context","arguments","length","document","querySelector","queryAll","Array","slice","querySelectorAll","_index","_index2","_extends","assign","target","source","_createClass","defineProperties","props","descriptor","configurable","writable","Constructor","protoProps","staticProps","_delegate","_delegate2","_Cache","_Cache2","_loadPage","_loadPage2","_renderPage","_renderPage2","_triggerEvent","_triggerEvent2","_on","_on2","_off","_off2","_updateTransition","_updateTransition2","_getAnimationPromises","_getAnimationPromises2","_getPageData","_getPageData2","_plugins","_utils","_helpers","_classCallCheck","instance","TypeError","Swup","setOptions","defaults","animateHistoryBrowsing","animationSelector","linkSelector","location","origin","cache","containers","requestHeaders","Accept","plugins","skipPopStateHandling","event","state","options","_handlers","animationInDone","animationInStart","animationOutDone","animationOutStart","animationSkipped","clickLink","contentReplaced","disabled","enabled","openPageInNewTab","pageLoaded","pageRetrievedFromCache","pageView","popState","samePage","samePageWithHash","serverError","transitionStart","willReplaceContent","scrollToElement","preloadPromise","transition","delegatedListeners","swup","loadPage","renderPage","triggerEvent","on","off","updateTransition","getAnimationPromises","getPageData","log","use","unuse","findPlugin","enable","_this","Promise","console","warn","click","linkClickHandler","addEventListener","popStateHandler","page","documentElement","outerHTML","url","responseURL","cacheUrl","forEach","plugin","history","replaceState","href","random","Math","title","classList","add","destroy","_this2","mouseover","removeEventListener","empty","element","removeAttribute","remove","metaKey","ctrlKey","shiftKey","altKey","button","preventDefault","link","delegateTarget","getAddress","getHash","customTransition","getAttribute","pathname","closest","delegate","type","callback","useCapture","listenerFn","listener","apply","e","DOCUMENT_NODE_TYPE","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","nodeType","parentNode","Cache","pages","last","keys","getPage","getCurrentPage","search","exists","data","popstate","animationPromises","xhrPromise","animateOut","all","then","resolve","route","reject","headers","response","status","concat","catch","errorUrl","go","text","output","toString","toLowerCase","replace","splice","pushState","split","hostname","getElementsByTagName","innerText","_typeof","iterator","constructor","html","fakeDom","createElement","innerHTML","blocks","_loop","v","item","index","setAttribute","push","_ret","json","pageClass","className","originalContent","method","request","XMLHttpRequest","onreadystatechange","readyState","open","setRequestHeader","send","el","transEndEventNames","WebkitTransition","MozTransition","OTransition","style","elementOrUrl","SVGElement","getPath","path","hash","body","setTimeout","classItem","RegExp","test","eventName","originalEvent","handler","error","CustomEvent","detail","dispatchEvent","filter","savedHandler","toRemove","indexOf","from","to","custom","promises","animatedElements","promise","responseText","pageObject","isSwupPlugin","_beforeMount","mount","pluginReference","find","unmount","_afterUnmount","pluginName"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Swup\"] = factory();\n\telse\n\t\troot[\"Swup\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Link = exports.markSwupElements = exports.getCurrentUrl = exports.transitionEnd = exports.fetch = exports.getDataFromHtml = exports.createHistoryRecord = exports.classify = undefined;\n\nvar _classify = __webpack_require__(8);\n\nvar _classify2 = _interopRequireDefault(_classify);\n\nvar _createHistoryRecord = __webpack_require__(9);\n\nvar _createHistoryRecord2 = _interopRequireDefault(_createHistoryRecord);\n\nvar _getDataFromHtml = __webpack_require__(10);\n\nvar _getDataFromHtml2 = _interopRequireDefault(_getDataFromHtml);\n\nvar _fetch = __webpack_require__(11);\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _transitionEnd = __webpack_require__(12);\n\nvar _transitionEnd2 = _interopRequireDefault(_transitionEnd);\n\nvar _getCurrentUrl = __webpack_require__(13);\n\nvar _getCurrentUrl2 = _interopRequireDefault(_getCurrentUrl);\n\nvar _markSwupElements = __webpack_require__(14);\n\nvar _markSwupElements2 = _interopRequireDefault(_markSwupElements);\n\nvar _Link = __webpack_require__(15);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar classify = exports.classify = _classify2.default;\nvar createHistoryRecord = exports.createHistoryRecord = _createHistoryRecord2.default;\nvar getDataFromHtml = exports.getDataFromHtml = _getDataFromHtml2.default;\nvar fetch = exports.fetch = _fetch2.default;\nvar transitionEnd = exports.transitionEnd = _transitionEnd2.default;\nvar getCurrentUrl = exports.getCurrentUrl = _getCurrentUrl2.default;\nvar markSwupElements = exports.markSwupElements = _markSwupElements2.default;\nvar Link = exports.Link = _Link2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar query = exports.query = function query(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn context.querySelector(selector);\n};\n\nvar queryAll = exports.queryAll = function queryAll(selector) {\n\tvar context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n\tif (typeof selector !== 'string') {\n\t\treturn selector;\n\t}\n\n\treturn Array.prototype.slice.call(context.querySelectorAll(selector));\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(3);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _index2.default; // this is here for webpack to expose Swup as window.Swup\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// modules\n\n\nvar _delegate = __webpack_require__(4);\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = __webpack_require__(6);\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _loadPage = __webpack_require__(7);\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = __webpack_require__(16);\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _triggerEvent = __webpack_require__(17);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _on = __webpack_require__(18);\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = __webpack_require__(19);\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = __webpack_require__(20);\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _getAnimationPromises = __webpack_require__(21);\n\nvar _getAnimationPromises2 = _interopRequireDefault(_getAnimationPromises);\n\nvar _getPageData = __webpack_require__(22);\n\nvar _getPageData2 = _interopRequireDefault(_getPageData);\n\nvar _plugins = __webpack_require__(23);\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Swup = function () {\n\tfunction Swup(setOptions) {\n\t\t_classCallCheck(this, Swup);\n\n\t\t// default options\n\t\tvar defaults = {\n\t\t\tanimateHistoryBrowsing: false,\n\t\t\tanimationSelector: '[class*=\"transition-\"]',\n\t\t\tlinkSelector: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n\t\t\tcache: true,\n\t\t\tcontainers: ['#swup'],\n\t\t\trequestHeaders: {\n\t\t\t\t'X-Requested-With': 'swup',\n\t\t\t\tAccept: 'text/html, application/xhtml+xml'\n\t\t\t},\n\t\t\tplugins: [],\n\t\t\tskipPopStateHandling: function skipPopStateHandling(event) {\n\t\t\t\treturn !(event.state && event.state.source === 'swup');\n\t\t\t}\n\t\t};\n\n\t\t// merge options\n\t\tvar options = _extends({}, defaults, setOptions);\n\n\t\t// handler arrays\n\t\tthis._handlers = {\n\t\t\tanimationInDone: [],\n\t\t\tanimationInStart: [],\n\t\t\tanimationOutDone: [],\n\t\t\tanimationOutStart: [],\n\t\t\tanimationSkipped: [],\n\t\t\tclickLink: [],\n\t\t\tcontentReplaced: [],\n\t\t\tdisabled: [],\n\t\t\tenabled: [],\n\t\t\topenPageInNewTab: [],\n\t\t\tpageLoaded: [],\n\t\t\tpageRetrievedFromCache: [],\n\t\t\tpageView: [],\n\t\t\tpopState: [],\n\t\t\tsamePage: [],\n\t\t\tsamePageWithHash: [],\n\t\t\tserverError: [],\n\t\t\ttransitionStart: [],\n\t\t\ttransitionEnd: [],\n\t\t\twillReplaceContent: []\n\t\t};\n\n\t\t// variable for id of element to scroll to after render\n\t\tthis.scrollToElement = null;\n\t\t// variable for promise used for preload, so no new loading of the same page starts while page is loading\n\t\tthis.preloadPromise = null;\n\t\t// variable for save options\n\t\tthis.options = options;\n\t\t// variable for plugins array\n\t\tthis.plugins = [];\n\t\t// variable for current transition object\n\t\tthis.transition = {};\n\t\t// variable for keeping event listeners from \"delegate\"\n\t\tthis.delegatedListeners = {};\n\n\t\t// make modules accessible in instance\n\t\tthis.cache = new _Cache2.default();\n\t\tthis.cache.swup = this;\n\t\tthis.loadPage = _loadPage2.default;\n\t\tthis.renderPage = _renderPage2.default;\n\t\tthis.triggerEvent = _triggerEvent2.default;\n\t\tthis.on = _on2.default;\n\t\tthis.off = _off2.default;\n\t\tthis.updateTransition = _updateTransition2.default;\n\t\tthis.getAnimationPromises = _getAnimationPromises2.default;\n\t\tthis.getPageData = _getPageData2.default;\n\t\tthis.log = function () {}; // here so it can be used by plugins\n\t\tthis.use = _plugins.use;\n\t\tthis.unuse = _plugins.unuse;\n\t\tthis.findPlugin = _plugins.findPlugin;\n\n\t\t// enable swup\n\t\tthis.enable();\n\t}\n\n\t_createClass(Swup, [{\n\t\tkey: 'enable',\n\t\tvalue: function enable() {\n\t\t\tvar _this = this;\n\n\t\t\t// check for Promise support\n\t\t\tif (typeof Promise === 'undefined') {\n\t\t\t\tconsole.warn('Promise is not supported');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// add event listeners\n\t\t\tthis.delegatedListeners.click = (0, _delegate2.default)(document, this.options.linkSelector, 'click', this.linkClickHandler.bind(this));\n\t\t\twindow.addEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// initial save to cache\n\t\t\tvar page = (0, _helpers.getDataFromHtml)(document.documentElement.outerHTML, this.options.containers);\n\t\t\tpage.url = page.responseURL = (0, _helpers.getCurrentUrl)();\n\t\t\tif (this.options.cache) {\n\t\t\t\tthis.cache.cacheUrl(page);\n\t\t\t}\n\n\t\t\t// mark swup blocks in html\n\t\t\t(0, _helpers.markSwupElements)(document.documentElement, this.options.containers);\n\n\t\t\t// mount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this.use(plugin);\n\t\t\t});\n\n\t\t\t// modify initial history record\n\t\t\twindow.history.replaceState(Object.assign({}, window.history.state, {\n\t\t\t\turl: window.location.href,\n\t\t\t\trandom: Math.random(),\n\t\t\t\tsource: 'swup'\n\t\t\t}), document.title, window.location.href);\n\n\t\t\t// trigger enabled event\n\t\t\tthis.triggerEvent('enabled');\n\n\t\t\t// add swup-enabled class to html tag\n\t\t\tdocument.documentElement.classList.add('swup-enabled');\n\n\t\t\t// trigger page view event\n\t\t\tthis.triggerEvent('pageView');\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tvar _this2 = this;\n\n\t\t\t// remove delegated listeners\n\t\t\tthis.delegatedListeners.click.destroy();\n\t\t\tthis.delegatedListeners.mouseover.destroy();\n\n\t\t\t// remove popstate listener\n\t\t\twindow.removeEventListener('popstate', this.popStateHandler.bind(this));\n\n\t\t\t// empty cache\n\t\t\tthis.cache.empty();\n\n\t\t\t// unmount plugins\n\t\t\tthis.options.plugins.forEach(function (plugin) {\n\t\t\t\t_this2.unuse(plugin);\n\t\t\t});\n\n\t\t\t// remove swup data atributes from blocks\n\t\t\t(0, _utils.queryAll)('[data-swup]').forEach(function (element) {\n\t\t\t\telement.removeAttribute('data-swup');\n\t\t\t});\n\n\t\t\t// remove handlers\n\t\t\tthis.off();\n\n\t\t\t// trigger disable event\n\t\t\tthis.triggerEvent('disabled');\n\n\t\t\t// remove swup-enabled class from html tag\n\t\t\tdocument.documentElement.classList.remove('swup-enabled');\n\t\t}\n\t}, {\n\t\tkey: 'linkClickHandler',\n\t\tvalue: function linkClickHandler(event) {\n\t\t\t// no control key pressed\n\t\t\tif (!event.metaKey && !event.ctrlKey && !event.shiftKey && !event.altKey) {\n\t\t\t\t// index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n\t\t\t\tif (event.button === 0) {\n\t\t\t\t\tthis.triggerEvent('clickLink', event);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvar link = new _helpers.Link(event.delegateTarget);\n\t\t\t\t\tif (link.getAddress() == (0, _helpers.getCurrentUrl)() || link.getAddress() == '') {\n\t\t\t\t\t\t// link to the same URL\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\t// link to the same URL with hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePageWithHash', event);\n\t\t\t\t\t\t\tvar element = document.querySelector(link.getHash());\n\t\t\t\t\t\t\tif (element != null) {\n\t\t\t\t\t\t\t\thistory.replaceState({\n\t\t\t\t\t\t\t\t\turl: link.getAddress() + link.getHash(),\n\t\t\t\t\t\t\t\t\trandom: Math.random(),\n\t\t\t\t\t\t\t\t\tsource: 'swup'\n\t\t\t\t\t\t\t\t}, document.title, link.getAddress() + link.getHash());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// referenced element not found\n\t\t\t\t\t\t\t\tconsole.warn('Element for offset not found (' + link.getHash() + ')');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// link to the same URL without hash\n\t\t\t\t\t\t\tthis.triggerEvent('samePage', event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// link to different url\n\t\t\t\t\t\tif (link.getHash() != '') {\n\t\t\t\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// get custom transition from data\n\t\t\t\t\t\tvar customTransition = event.delegateTarget.getAttribute('data-swup-transition');\n\n\t\t\t\t\t\t// load page\n\t\t\t\t\t\tthis.loadPage({ url: link.getAddress(), customTransition: customTransition }, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// open in new tab (do nothing)\n\t\t\t\tthis.triggerEvent('openPageInNewTab', event);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'popStateHandler',\n\t\tvalue: function popStateHandler(event) {\n\t\t\tif (this.options.skipPopStateHandling(event)) return;\n\t\t\tvar link = new _helpers.Link(event.state ? event.state.url : window.location.pathname);\n\t\t\tif (link.getHash() !== '') {\n\t\t\t\tthis.scrollToElement = link.getHash();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\tthis.triggerEvent('popState', event);\n\t\t\tthis.loadPage({ url: link.getAddress() }, event);\n\t\t}\n\t}]);\n\n\treturn Swup;\n}();\n\nexports.default = Swup;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar closest = __webpack_require__(5);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = exports.Cache = function () {\n\tfunction Cache() {\n\t\t_classCallCheck(this, Cache);\n\n\t\tthis.pages = {};\n\t\tthis.last = null;\n\t}\n\n\t_createClass(Cache, [{\n\t\tkey: 'cacheUrl',\n\t\tvalue: function cacheUrl(page) {\n\t\t\tif (page.url in this.pages === false) {\n\t\t\t\tthis.pages[page.url] = page;\n\t\t\t}\n\t\t\tthis.last = this.pages[page.url];\n\t\t\tthis.swup.log('Cache (' + Object.keys(this.pages).length + ')', this.pages);\n\t\t}\n\t}, {\n\t\tkey: 'getPage',\n\t\tvalue: function getPage(url) {\n\t\t\treturn this.pages[url];\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentPage',\n\t\tvalue: function getCurrentPage() {\n\t\t\treturn this.getPage(window.location.pathname + window.location.search);\n\t\t}\n\t}, {\n\t\tkey: 'exists',\n\t\tvalue: function exists(url) {\n\t\t\treturn url in this.pages;\n\t\t}\n\t}, {\n\t\tkey: 'empty',\n\t\tvalue: function empty() {\n\t\t\tthis.pages = {};\n\t\t\tthis.last = null;\n\t\t\tthis.swup.log('Cache cleared');\n\t\t}\n\t}, {\n\t\tkey: 'remove',\n\t\tvalue: function remove(url) {\n\t\t\tdelete this.pages[url];\n\t\t}\n\t}]);\n\n\treturn Cache;\n}();\n\nexports.default = Cache;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _helpers = __webpack_require__(0);\n\nvar loadPage = function loadPage(data, popstate) {\n\tvar _this = this;\n\n\t// create array for storing animation promises\n\tvar animationPromises = [],\n\t    xhrPromise = void 0;\n\tvar animateOut = function animateOut() {\n\t\t_this.triggerEvent('animationOutStart');\n\n\t\t// handle classes\n\t\tdocument.documentElement.classList.add('is-changing');\n\t\tdocument.documentElement.classList.add('is-leaving');\n\t\tdocument.documentElement.classList.add('is-animating');\n\t\tif (popstate) {\n\t\t\tdocument.documentElement.classList.add('is-popstate');\n\t\t}\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.url));\n\n\t\t// animation promise stuff\n\t\tanimationPromises = _this.getAnimationPromises('out');\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationOutDone');\n\t\t});\n\n\t\t// create history record if this is not a popstate call\n\t\tif (!popstate) {\n\t\t\t// create pop element with or without anchor\n\t\t\tvar state = void 0;\n\t\t\tif (_this.scrollToElement != null) {\n\t\t\t\tstate = data.url + _this.scrollToElement;\n\t\t\t} else {\n\t\t\t\tstate = data.url;\n\t\t\t}\n\n\t\t\t(0, _helpers.createHistoryRecord)(state);\n\t\t}\n\t};\n\n\tthis.triggerEvent('transitionStart', popstate);\n\n\t// set transition object\n\tif (data.customTransition != null) {\n\t\tthis.updateTransition(window.location.pathname, data.url, data.customTransition);\n\t\tdocument.documentElement.classList.add('to-' + (0, _helpers.classify)(data.customTransition));\n\t} else {\n\t\tthis.updateTransition(window.location.pathname, data.url);\n\t}\n\n\t// start/skip animation\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tanimateOut();\n\t} else {\n\t\tthis.triggerEvent('animationSkipped');\n\t}\n\n\t// start/skip loading of page\n\tif (this.cache.exists(data.url)) {\n\t\txhrPromise = new Promise(function (resolve) {\n\t\t\tresolve();\n\t\t});\n\t\tthis.triggerEvent('pageRetrievedFromCache');\n\t} else {\n\t\tif (!this.preloadPromise || this.preloadPromise.route != data.url) {\n\t\t\txhrPromise = new Promise(function (resolve, reject) {\n\t\t\t\t(0, _helpers.fetch)(_extends({}, data, { headers: _this.options.requestHeaders }), function (response) {\n\t\t\t\t\tif (response.status === 500) {\n\t\t\t\t\t\t_this.triggerEvent('serverError');\n\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// get json data\n\t\t\t\t\t\tvar page = _this.getPageData(response);\n\t\t\t\t\t\tif (page != null) {\n\t\t\t\t\t\t\tpage.url = data.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(data.url);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// render page\n\t\t\t\t\t\t_this.cache.cacheUrl(page);\n\t\t\t\t\t\t_this.triggerEvent('pageLoaded');\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\txhrPromise = this.preloadPromise;\n\t\t}\n\t}\n\n\t// when everything is ready, handle the outcome\n\tPromise.all(animationPromises.concat([xhrPromise])).then(function () {\n\t\t// render page\n\t\t_this.renderPage(_this.cache.getPage(data.url), popstate);\n\t\t_this.preloadPromise = null;\n\t}).catch(function (errorUrl) {\n\t\t// rewrite the skipPopStateHandling function to redirect manually when the history.go is processed\n\t\t_this.options.skipPopStateHandling = function () {\n\t\t\twindow.location = errorUrl;\n\t\t\treturn true;\n\t\t};\n\n\t\t// go back to the actual page were still at\n\t\twindow.history.go(-1);\n\t});\n};\n\nexports.default = loadPage;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar classify = function classify(text) {\n\tvar output = text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n\t.replace(/\\//g, '-') // Replace / with -\n\t.replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n\t.replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n\t.replace(/^-+/, '') // Trim - from start of text\n\t.replace(/-+$/, ''); // Trim - from end of text\n\tif (output[0] === '/') output = output.splice(1);\n\tif (output === '') output = 'homepage';\n\treturn output;\n};\n\nexports.default = classify;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar createHistoryRecord = function createHistoryRecord(url) {\n\twindow.history.pushState({\n\t\turl: url || window.location.href.split(window.location.hostname)[1],\n\t\trandom: Math.random(),\n\t\tsource: 'swup'\n\t}, document.getElementsByTagName('title')[0].innerText, url || window.location.href.split(window.location.hostname)[1]);\n};\n\nexports.default = createHistoryRecord;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _utils = __webpack_require__(1);\n\nvar getDataFromHtml = function getDataFromHtml(html, containers) {\n\tvar fakeDom = document.createElement('html');\n\tfakeDom.innerHTML = html;\n\tvar blocks = [];\n\n\tvar _loop = function _loop(i) {\n\t\tif (fakeDom.querySelector(containers[i]) == null) {\n\t\t\t// page in invalid\n\t\t\treturn {\n\t\t\t\tv: null\n\t\t\t};\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], fakeDom)[index].setAttribute('data-swup', blocks.length); // marks element with data-swup\n\t\t\t\tblocks.push((0, _utils.queryAll)(containers[i], fakeDom)[index].outerHTML);\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\tvar _ret = _loop(i);\n\n\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t}\n\n\tvar json = {\n\t\ttitle: fakeDom.querySelector('title').innerText,\n\t\tpageClass: fakeDom.querySelector('body').className,\n\t\toriginalContent: html,\n\t\tblocks: blocks\n\t};\n\n\t// to prevent memory leaks\n\tfakeDom.innerHTML = '';\n\tfakeDom = null;\n\n\treturn json;\n};\n\nexports.default = getDataFromHtml;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar fetch = function fetch(setOptions) {\n\tvar callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\tvar defaults = {\n\t\turl: window.location.pathname + window.location.search,\n\t\tmethod: 'GET',\n\t\tdata: null,\n\t\theaders: {}\n\t};\n\n\tvar options = _extends({}, defaults, setOptions);\n\n\tvar request = new XMLHttpRequest();\n\n\trequest.onreadystatechange = function () {\n\t\tif (request.readyState === 4) {\n\t\t\tif (request.status !== 500) {\n\t\t\t\tcallback(request);\n\t\t\t} else {\n\t\t\t\tcallback(request);\n\t\t\t}\n\t\t}\n\t};\n\n\trequest.open(options.method, options.url, true);\n\tObject.keys(options.headers).forEach(function (key) {\n\t\trequest.setRequestHeader(key, options.headers[key]);\n\t});\n\trequest.send(options.data);\n\treturn request;\n};\n\nexports.default = fetch;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar transitionEnd = function transitionEnd() {\n\tvar el = document.createElement('div');\n\n\tvar transEndEventNames = {\n\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\tMozTransition: 'transitionend',\n\t\tOTransition: 'oTransitionEnd otransitionend',\n\t\ttransition: 'transitionend'\n\t};\n\n\tfor (var name in transEndEventNames) {\n\t\tif (el.style[name] !== undefined) {\n\t\t\treturn transEndEventNames[name];\n\t\t}\n\t}\n\n\treturn false;\n};\n\nexports.default = transitionEnd;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar getCurrentUrl = function getCurrentUrl() {\n\treturn window.location.pathname + window.location.search;\n};\n\nexports.default = getCurrentUrl;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = __webpack_require__(1);\n\nvar markSwupElements = function markSwupElements(element, containers) {\n\tvar blocks = 0;\n\n\tvar _loop = function _loop(i) {\n\t\tif (element.querySelector(containers[i]) == null) {\n\t\t\tconsole.warn('Element ' + containers[i] + ' is not in current page.');\n\t\t} else {\n\t\t\t(0, _utils.queryAll)(containers[i]).forEach(function (item, index) {\n\t\t\t\t(0, _utils.queryAll)(containers[i], element)[index].setAttribute('data-swup', blocks);\n\t\t\t\tblocks++;\n\t\t\t});\n\t\t}\n\t};\n\n\tfor (var i = 0; i < containers.length; i++) {\n\t\t_loop(i);\n\t}\n};\n\nexports.default = markSwupElements;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Link = function () {\n\tfunction Link(elementOrUrl) {\n\t\t_classCallCheck(this, Link);\n\n\t\tif (elementOrUrl instanceof Element || elementOrUrl instanceof SVGElement) {\n\t\t\tthis.link = elementOrUrl;\n\t\t} else {\n\t\t\tthis.link = document.createElement('a');\n\t\t\tthis.link.href = elementOrUrl;\n\t\t}\n\t}\n\n\t_createClass(Link, [{\n\t\tkey: 'getPath',\n\t\tvalue: function getPath() {\n\t\t\tvar path = this.link.pathname;\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getAddress',\n\t\tvalue: function getAddress() {\n\t\t\tvar path = this.link.pathname + this.link.search;\n\n\t\t\tif (this.link.getAttribute('xlink:href')) {\n\t\t\t\tpath = this.link.getAttribute('xlink:href');\n\t\t\t}\n\n\t\t\tif (path[0] !== '/') {\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t\treturn path;\n\t\t}\n\t}, {\n\t\tkey: 'getHash',\n\t\tvalue: function getHash() {\n\t\t\treturn this.link.hash;\n\t\t}\n\t}]);\n\n\treturn Link;\n}();\n\nexports.default = Link;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nvar renderPage = function renderPage(page, popstate) {\n\tvar _this = this;\n\n\tdocument.documentElement.classList.remove('is-leaving');\n\n\t// replace state in case the url was redirected\n\tvar link = new _helpers.Link(page.responseURL);\n\tif (window.location.pathname !== link.getPath()) {\n\t\twindow.history.replaceState({\n\t\t\turl: link.getPath(),\n\t\t\trandom: Math.random(),\n\t\t\tsource: 'swup'\n\t\t}, document.title, link.getPath());\n\n\t\t// save new record for redirected url\n\t\tthis.cache.cacheUrl(_extends({}, page, { url: link.getPath() }));\n\t}\n\n\t// only add for non-popstate transitions\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tdocument.documentElement.classList.add('is-rendering');\n\t}\n\n\tthis.triggerEvent('willReplaceContent', popstate);\n\n\t// replace blocks\n\tfor (var i = 0; i < page.blocks.length; i++) {\n\t\tdocument.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n\t}\n\n\t// set title\n\tdocument.title = page.title;\n\n\tthis.triggerEvent('contentReplaced', popstate);\n\tthis.triggerEvent('pageView', popstate);\n\n\t// empty cache if it's disabled (because pages could be preloaded and stuff)\n\tif (!this.options.cache) {\n\t\tthis.cache.empty();\n\t}\n\n\t// start animation IN\n\tsetTimeout(function () {\n\t\tif (!popstate || _this.options.animateHistoryBrowsing) {\n\t\t\t_this.triggerEvent('animationInStart');\n\t\t\tdocument.documentElement.classList.remove('is-animating');\n\t\t}\n\t}, 10);\n\n\t// handle end of animation\n\tvar animationPromises = this.getAnimationPromises('in');\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationInDone');\n\t\t\t_this.triggerEvent('transitionEnd', popstate);\n\t\t\t// remove \"to-{page}\" classes\n\t\t\tdocument.documentElement.className.split(' ').forEach(function (classItem) {\n\t\t\t\tif (new RegExp('^to-').test(classItem) || classItem === 'is-changing' || classItem === 'is-rendering' || classItem === 'is-popstate') {\n\t\t\t\t\tdocument.documentElement.classList.remove(classItem);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tthis.triggerEvent('transitionEnd', popstate);\n\t}\n\n\t// reset scroll-to element\n\tthis.scrollToElement = null;\n};\n\nexports.default = renderPage;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar triggerEvent = function triggerEvent(eventName, originalEvent) {\n\t// call saved handlers with \"on\" method and pass originalEvent object if available\n\tthis._handlers[eventName].forEach(function (handler) {\n\t\ttry {\n\t\t\thandler(originalEvent);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t});\n\n\t// trigger event on document with prefix \"swup:\"\n\tvar event = new CustomEvent('swup:' + eventName, { detail: eventName });\n\tdocument.dispatchEvent(event);\n};\n\nexports.default = triggerEvent;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar on = function on(event, handler) {\n\tif (this._handlers[event]) {\n\t\tthis._handlers[event].push(handler);\n\t} else {\n\t\tconsole.warn(\"Unsupported event \" + event + \".\");\n\t}\n};\n\nexports.default = on;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar off = function off(event, handler) {\n\tvar _this = this;\n\n\tif (event != null) {\n\t\tif (handler != null) {\n\t\t\tif (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n\t\t\t\treturn savedHandler === handler;\n\t\t\t}).length) {\n\t\t\t\tvar toRemove = this._handlers[event].filter(function (savedHandler) {\n\t\t\t\t\treturn savedHandler === handler;\n\t\t\t\t})[0];\n\t\t\t\tvar index = this._handlers[event].indexOf(toRemove);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis._handlers[event].splice(index, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Handler for event '\" + event + \"' no found.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis._handlers[event] = [];\n\t\t}\n\t} else {\n\t\tObject.keys(this._handlers).forEach(function (keys) {\n\t\t\t_this._handlers[keys] = [];\n\t\t});\n\t}\n};\n\nexports.default = off;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar updateTransition = function updateTransition(from, to, custom) {\n\t// transition routes\n\tthis.transition = {\n\t\tfrom: from,\n\t\tto: to,\n\t\tcustom: custom\n\t};\n};\n\nexports.default = updateTransition;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _utils = __webpack_require__(1);\n\nvar _helpers = __webpack_require__(0);\n\nvar getAnimationPromises = function getAnimationPromises() {\n\tvar promises = [];\n\tvar animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n\tanimatedElements.forEach(function (element) {\n\t\tvar promise = new Promise(function (resolve) {\n\t\t\telement.addEventListener((0, _helpers.transitionEnd)(), function (event) {\n\t\t\t\tif (element == event.target) {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tpromises.push(promise);\n\t});\n\treturn promises;\n};\n\nexports.default = getAnimationPromises;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _helpers = __webpack_require__(0);\n\nvar getPageData = function getPageData(request) {\n\t// this method can be replaced in case other content than html is expected to be received from server\n\t// this function should always return {title, pageClass, originalContent, blocks, responseURL}\n\t// in case page has invalid structure - return null\n\tvar html = request.responseText;\n\tvar pageObject = (0, _helpers.getDataFromHtml)(html, this.options.containers);\n\n\tif (pageObject) {\n\t\tpageObject.responseURL = request.responseURL ? request.responseURL : window.location.href;\n\t} else {\n\t\tconsole.warn('Received page is invalid.');\n\t\treturn null;\n\t}\n\n\treturn pageObject;\n};\n\nexports.default = getPageData;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar use = exports.use = function use(plugin) {\n\tif (!plugin.isSwupPlugin) {\n\t\tconsole.warn('Not swup plugin instance ' + plugin + '.');\n\t\treturn;\n\t}\n\n\tthis.plugins.push(plugin);\n\tplugin.swup = this;\n\tif (typeof plugin._beforeMount === 'function') {\n\t\tplugin._beforeMount();\n\t}\n\tplugin.mount();\n\n\treturn this.plugins;\n};\n\nvar unuse = exports.unuse = function unuse(plugin) {\n\tvar pluginReference = void 0;\n\n\tif (typeof plugin === 'string') {\n\t\tpluginReference = this.plugins.find(function (p) {\n\t\t\treturn plugin === p.name;\n\t\t});\n\t} else {\n\t\tpluginReference = plugin;\n\t}\n\n\tif (!pluginReference) {\n\t\tconsole.warn('No such plugin.');\n\t\treturn;\n\t}\n\n\tpluginReference.unmount();\n\n\tif (typeof pluginReference._afterUnmount === 'function') {\n\t\tpluginReference._afterUnmount();\n\t}\n\n\tvar index = this.plugins.indexOf(pluginReference);\n\tthis.plugins.splice(index, 1);\n\n\treturn this.plugins;\n};\n\nvar findPlugin = exports.findPlugin = function findPlugin(pluginName) {\n\treturn this.plugins.find(function (p) {\n\t\treturn pluginName === p.name;\n\t});\n};\n\n/***/ })\n/******/ ]);\n});"]},"metadata":{},"sourceType":"script"}